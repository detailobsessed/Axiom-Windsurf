{
  "hooks": {
    "PostToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "If this bash command was xcodebuild/swift build and it failed (non-zero exit), suggest: 'Build failed. Run /axiom:fix-build for automatic diagnostics?'"
          },
          {
            "type": "command",
            "command": "bash -c 'O=\"$CLAUDE_TOOL_OUTPUT\"; echo \"$O\" | grep -qE \"Unable to simultaneously satisfy constraints\" && echo \"üí° Auto Layout conflict. Try: skill auto-layout-debugging\"; echo \"$O\" | grep -qE \"Actor-isolated|Sendable|data race|@MainActor\" && echo \"üí° Concurrency issue. Try: skill swift-concurrency\"; echo \"$O\" | grep -qE \"no such column|FOREIGN KEY constraint|migration\" && echo \"üí° Database migration issue. Try: skill database-migration\"; echo \"$O\" | grep -qE \"retain cycle|memory leak|deinit.*never called\" && echo \"üí° Memory issue detected. Try: skill memory-debugging\"; echo \"$O\" | grep -qE \"CKError|CKRecord.*error\" && echo \"üí° CloudKit issue. Try: skill cloudkit-ref or cloud-sync-diag\"; echo \"$O\" | grep -qE \"ubiquitous.*error|iCloud Drive|NSFileCoordinator\" && echo \"üí° iCloud Drive issue. Try: skill icloud-drive-ref or cloud-sync-diag\"; echo \"$O\" | grep -qE \"file.*disappeared|file not found|storage.*full\" && echo \"üí° File storage issue. Try: skill storage-diag\"; echo \"$O\" | grep -qE \"FileProtection|data protection|file.*locked\" && echo \"üí° File protection issue. Try: skill file-protection-ref\"; echo \"$O\" | grep -qE \"error:.*module.*not found|linker command failed\" && echo \"üí° Build configuration issue. Try: /axiom:fix-build\"; exit 0'"
          }
        ]
      },
      {
        "matcher": "Write|Edit",
        "hooks": [
          {
            "type": "command",
            "command": "bash -c 'if [[ \"$TOOL_INPUT_FILE_PATH\" == *.swift ]]; then if command -v swiftformat &>/dev/null; then swiftformat \"$TOOL_INPUT_FILE_PATH\" --quiet || true; else echo \"‚ö†Ô∏è Axiom: swiftformat not found. Install with: brew install swiftformat\"; fi; fi; exit 0'"
          }
        ]
      }
    ],
    "SessionStart": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "\"${CLAUDE_PLUGIN_ROOT}/hooks/session-start.sh\""
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "Edit|Write",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "If the file path contains .xcdatamodeld, add context: 'Warning: Core Data model changes require migration planning. Run /axiom:audit-core-data after changes to verify safety.'"
          }
        ]
      }
    ],
    "UserPromptSubmit": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "\"${CLAUDE_PLUGIN_ROOT}/hooks/user-prompt-submit.sh\""
          }
        ]
      }
    ]
  }
}
